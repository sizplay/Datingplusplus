!function(b){var a=function(d,c){this.$element=b(d);this.options=b.extend({},b.fn.limit.defaults,c);this.maxChars=this.options.maxChars||this.maxChars;this.counter=b(this.options.counter)||this.counter;this.listen();this.check()};a.prototype={constructor:a,listen:function(){this.$element.on("keypress",b.proxy(this.keypress,this)).on("keyup",b.proxy(this.keyup,this));if(b.browser.webkit||b.browser.msie){this.$element.on("keydown",b.proxy(this.keypress,this))}},check:function(){this.query=this.$element.val();if(!this.query){this.counter.text(this.maxChars);this.counter.css("color","red");this.$element.trigger("uncross")}this.counter.text(this.maxChars-this.query.length);if(this.query.length>this.maxChars){this.counter.css("color","red");this.$element.trigger("cross")}else{if(this.query.length>this.maxChars-10){this.counter.css("color","red");this.$element.trigger("uncross")}else{this.counter.css("color","");this.$element.trigger("uncross")}}},keyup:function(c){this.check();c.stopPropagation();c.preventDefault()},keypress:function(c){this.check();c.stopPropagation()}};b.fn.limit=function(c){return this.each(function(){var f=b(this),e=f.data("limit"),d=typeof c=="object"&&c;if(!e){f.data("limit",(e=new a(this,d)))}if(typeof c=="string"){e[c]()}})};b.fn.limit.defaults={maxChars:140,counter:""};b.fn.limit.Constructor=a;b(function(){b("body").on("focus.limit.data-api",'[data-provide="limit"]',function(d){var c=b(this);if(c.data("limit")){return}d.preventDefault();c.limit(c.data())})})}(window.jQuery);
